{"name":"ecsite-sample-shops","desc":"","tables":[{"name":"current_cart","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"int","nullable":false,"default":null,"comment":"","extra_def":"auto_increment"},{"name":"user_id","type":"int","nullable":false,"default":null,"comment":""},{"name":"item_id","type":"int","nullable":false,"default":null,"comment":""},{"name":"quantity","type":"int","nullable":false,"default":"1","comment":""}],"indexes":[{"name":"item_id","def":"KEY item_id (item_id) USING BTREE","table":"current_cart","columns":["item_id"],"comment":""},{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"current_cart","columns":["id"],"comment":""},{"name":"user_id","def":"UNIQUE KEY user_id (user_id) USING BTREE","table":"current_cart","columns":["user_id"],"comment":""}],"constraints":[{"name":"current_cart_ibfk_1","type":"FOREIGN KEY","def":"FOREIGN KEY (user_id) REFERENCES users (id)","table":"current_cart","referenced_table":"users","columns":["user_id"],"referenced_columns":["id"],"comment":""},{"name":"current_cart_ibfk_2","type":"FOREIGN KEY","def":"FOREIGN KEY (item_id) REFERENCES items (id)","table":"current_cart","referenced_table":"items","columns":["item_id"],"referenced_columns":["id"],"comment":""},{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"current_cart","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""},{"name":"user_id","type":"UNIQUE","def":"UNIQUE KEY user_id (user_id)","table":"current_cart","referenced_table":null,"columns":["user_id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `current_cart` (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `user_id` int NOT NULL,\n  `item_id` int NOT NULL,\n  `quantity` int NOT NULL DEFAULT '1',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `user_id` (`user_id`),\n  KEY `item_id` (`item_id`),\n  CONSTRAINT `current_cart_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),\n  CONSTRAINT `current_cart_ibfk_2` FOREIGN KEY (`item_id`) REFERENCES `items` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci"},{"name":"items","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"int","nullable":false,"default":null,"comment":"","extra_def":"auto_increment"},{"name":"name","type":"varchar(255)","nullable":false,"default":null,"comment":""},{"name":"description","type":"text","nullable":true,"default":null,"comment":""},{"name":"price","type":"decimal(10,2)","nullable":false,"default":null,"comment":""},{"name":"stock","type":"int","nullable":true,"default":"0","comment":""}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"items","columns":["id"],"comment":""}],"constraints":[{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"items","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `items` (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `price` decimal(10,2) NOT NULL,\n  `stock` int DEFAULT '0',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci"},{"name":"ordered_items","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"int","nullable":false,"default":null,"comment":"","extra_def":"auto_increment"},{"name":"order_id","type":"int","nullable":false,"default":null,"comment":""},{"name":"item_id","type":"int","nullable":false,"default":null,"comment":""},{"name":"quantity","type":"int","nullable":false,"default":null,"comment":""},{"name":"price_at_purchase","type":"decimal(10,2)","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"item_id","def":"KEY item_id (item_id) USING BTREE","table":"ordered_items","columns":["item_id"],"comment":""},{"name":"order_id","def":"KEY order_id (order_id) USING BTREE","table":"ordered_items","columns":["order_id"],"comment":""},{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"ordered_items","columns":["id"],"comment":""}],"constraints":[{"name":"ordered_items_ibfk_1","type":"FOREIGN KEY","def":"FOREIGN KEY (order_id) REFERENCES orders (id)","table":"ordered_items","referenced_table":"orders","columns":["order_id"],"referenced_columns":["id"],"comment":""},{"name":"ordered_items_ibfk_2","type":"FOREIGN KEY","def":"FOREIGN KEY (item_id) REFERENCES items (id)","table":"ordered_items","referenced_table":"items","columns":["item_id"],"referenced_columns":["id"],"comment":""},{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"ordered_items","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `ordered_items` (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `order_id` int NOT NULL,\n  `item_id` int NOT NULL,\n  `quantity` int NOT NULL,\n  `price_at_purchase` decimal(10,2) NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `order_id` (`order_id`),\n  KEY `item_id` (`item_id`),\n  CONSTRAINT `ordered_items_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`),\n  CONSTRAINT `ordered_items_ibfk_2` FOREIGN KEY (`item_id`) REFERENCES `items` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci"},{"name":"orders","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"int","nullable":false,"default":null,"comment":"","extra_def":"auto_increment"},{"name":"user_id","type":"int","nullable":false,"default":null,"comment":""},{"name":"order_date","type":"timestamp","nullable":true,"default":"CURRENT_TIMESTAMP","extra_def":"DEFAULT_GENERATED","comment":""},{"name":"total_amount","type":"decimal(10,2)","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"user_id","def":"KEY user_id (user_id) USING BTREE","table":"orders","columns":["user_id"],"comment":""},{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"orders","columns":["id"],"comment":""}],"constraints":[{"name":"orders_ibfk_1","type":"FOREIGN KEY","def":"FOREIGN KEY (user_id) REFERENCES users (id)","table":"orders","referenced_table":"users","columns":["user_id"],"referenced_columns":["id"],"comment":""},{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"orders","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `orders` (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `user_id` int NOT NULL,\n  `order_date` timestamp NULL DEFAULT CURRENT_TIMESTAMP,\n  `total_amount` decimal(10,2) NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `user_id` (`user_id`),\n  CONSTRAINT `orders_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci"},{"name":"users","type":"BASE TABLE","comment":"","columns":[{"name":"id","type":"int","nullable":false,"default":null,"comment":"","extra_def":"auto_increment"},{"name":"username","type":"varchar(255)","nullable":false,"default":null,"comment":""},{"name":"email","type":"varchar(255)","nullable":false,"default":null,"comment":""},{"name":"password_hash","type":"varchar(255)","nullable":false,"default":null,"comment":""}],"indexes":[{"name":"PRIMARY","def":"PRIMARY KEY (id) USING BTREE","table":"users","columns":["id"],"comment":""},{"name":"email","def":"UNIQUE KEY email (email) USING BTREE","table":"users","columns":["email"],"comment":""},{"name":"username","def":"UNIQUE KEY username (username) USING BTREE","table":"users","columns":["username"],"comment":""}],"constraints":[{"name":"email","type":"UNIQUE","def":"UNIQUE KEY email (email)","table":"users","referenced_table":null,"columns":["email"],"referenced_columns":null,"comment":""},{"name":"PRIMARY","type":"PRIMARY KEY","def":"PRIMARY KEY (id)","table":"users","referenced_table":null,"columns":["id"],"referenced_columns":null,"comment":""},{"name":"username","type":"UNIQUE","def":"UNIQUE KEY username (username)","table":"users","referenced_table":null,"columns":["username"],"referenced_columns":null,"comment":""}],"triggers":[],"def":"CREATE TABLE `users` (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `username` varchar(255) NOT NULL,\n  `email` varchar(255) NOT NULL,\n  `password_hash` varchar(255) NOT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `username` (`username`),\n  UNIQUE KEY `email` (`email`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci"}],"relations":[{"table":"current_cart","columns":["user_id"],"cardinality":"Zero or one","parent_table":"users","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (user_id) REFERENCES users (id)","virtual":false},{"table":"current_cart","columns":["item_id"],"cardinality":"Zero or more","parent_table":"items","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (item_id) REFERENCES items (id)","virtual":false},{"table":"ordered_items","columns":["order_id"],"cardinality":"Zero or more","parent_table":"orders","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (order_id) REFERENCES orders (id)","virtual":false},{"table":"ordered_items","columns":["item_id"],"cardinality":"Zero or more","parent_table":"items","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (item_id) REFERENCES items (id)","virtual":false},{"table":"orders","columns":["user_id"],"cardinality":"Zero or more","parent_table":"users","parent_columns":["id"],"parent_cardinality":"Exactly one","def":"FOREIGN KEY (user_id) REFERENCES users (id)","virtual":false}],"functions":[],"driver":{"name":"mysql","database_version":"8.0.40","meta":{"dict":{"Functions":"Stored procedures and functions"}}},"viewpoints":[{"name":"business","desc":"hoge","tables":["orders","ordered_items","current_cart"],"groups":[{"name":"注文関連","desc":"fuga","tables":["orders","ordered_items","current_cart"]}]}]}
